{% extends '__base.html' %}


{% block body %}

<div class="container">
    <h1>Visualisation des statistiques</h1>
</div>

<div class="container">
  <h2>Tableau Requête Collecte</h2>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Collect ID</th>
        <th>Montant achat</th>
        <th>Catégorie produit</th>
      </tr>
    </thead>
    <tbody>
      {% for requete in requetes_collecte %}
      <tr>
        <td>{{ requete.id }}</td>
        <td>{{ requete.nb_collect_id }}</td>
        <td>{{ requete.purchase_amount }}</td>
        <td>{{ requete.product_category_name_id }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


<div class="container">
  <h2>Tableau Requête Anonymisées</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre enfant</th>
        <th>Catégorie socioprofessionnelle</th>
        <th>Montant achat</th>
        <th>Date achat</th>
        <th>Collect ID</th>
      </tr>
    </thead>
    <tbody>
      {% for requete in requetes_anonymisees %}
      <tr>
        <td>{{ requete.id }}</td>
        <td>{{ requete.child_number }}</td>
        <td>{{ requete.csp_name_id }}</td>
        <td>{{ requete.purchase_amount }}</td>
        <td>{{ requete.purchase_date }}</td>
        <td>{{ requete.nb_collect_id }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


<div class="container">
  <h2>Tableau dépenses par catégorie en fonction de la catégorie socioprofessionnelle</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Catégorie socioprofessionnelle</th>
        <th>Montant achat</th>
      </tr>
    </thead>
    <tbody>
      {% for requete in depense_categorie_csp %}
      <tr>
        <td>{{ requete.id }}</td>
        <td>{{ requete.csp_name_id }}</td>
        <td>{{ requete.purchase_amount }}</td>

      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


<div class="container">
  <h2>Tableau la dépense du panier moyen en fonction de la catégorie socioprofessionnelle</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Catégorie socioprofessionnelle</th>
        <th>Montant achat</th>
      </tr>
    </thead>
    <tbody>
      {% for requete in depense_panier_moyen_csp %}
      <tr>
        <td>{{ requete.id }}</td>
        <td>{{ requete.csp_name_id }}</td>
        <td>{{ requete.panier_moyen }}</td>

      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="container-fluid">
    <div class='row justify-content-center'>

        <div class = "col-md-10 col-lg-6">
             <canvas id="depense_categorie_csp"></canvas>
        </div>
    </div>
</div>

<script>

    var ctx = document.getElementById("depense_categorie_csp");
    new Chart(ctx, {
         type: 'line',
         data: {labels:[1, 2, 3, 4, 5],
            datasets: [{
            label:"USD",
            data:[1, 3, 2, 7, 4],
            fill: false,
            borderColor:'rgb(255,128,128)'
            }]
         }
    });

</script>

<div class="container-fluid">
    <div class='row justify-content-center'>

        <div class = "col-md-10 col-lg-6">
             <canvas id="depense_categorie_csp"></canvas>
        </div>
    </div>
</div>

<script>

    var ctx = document.getElementById("depense_categorie_csp");
    new Chart(ctx, {
         type: 'line',
         data: {labels:[1, 2, 3, 4, 5],
            datasets: [{
            label:"USD",
            data:[1, 3, 2, 7, 4],
            fill: false,
            borderColor:'rgb(255,128,128)'
            }]
         }
    });

</script>





{% endblock body %}
